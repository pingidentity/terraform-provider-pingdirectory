---
page_title: "pingdirectory_pkcs11_cipher_stream_provider Resource - terraform-provider-pingdirectory"
subcategory: "Cipher Stream Provider"
description: |-
  Manages a Pkcs11 Cipher Stream Provider.
---

# pingdirectory_pkcs11_cipher_stream_provider (Resource)

Manages a Pkcs11 Cipher Stream Provider.

## Example Usage

```terraform
terraform {
  required_version = ">=1.1"
  required_providers {
    pingdirectory = {
      version = "~> 0.3.0"
      source  = "pingidentity/pingdirectory"
    }
  }
}

provider "pingdirectory" {
  username   = "cn=administrator"
  password   = "2FederateM0re"
  https_host = "https://localhost:1443"
  # Warning: The insecure_trust_all_tls attribute configures the provider to trust any certificate presented by the PingDirectory server.
  # It should not be used in production. If you need to specify trusted CA certificates, use the
  # ca_certificate_pem_files attribute to point to any number of trusted CA certificate files
  # in PEM format. If you do not specify certificates, the host's default root CA set will be used.
  # Example:
  # ca_certificate_pem_files = ["/example/path/to/cacert1.pem", "/example/path/to/cacert2.pem"]
  insecure_trust_all_tls = true
  product_version        = "9.2.0.0"
}

resource "pingdirectory_pkcs11_cipher_stream_provider" "myPkcs11CipherStreamProvider" {
  id                = "MyPkcs11CipherStreamProvider"
  ssl_cert_nickname = "my_example_ssl_cert_nickname"
  enabled           = false
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `enabled` (Boolean) Indicates whether this Cipher Stream Provider is enabled for use in the Directory Server.
- `id` (String) Name of this object.
- `ssl_cert_nickname` (String) The alias for the certificate in the PKCS #11 token that will be used to wrap the encryption key. The target certificate must exist in the PKCS #11 token, and it must have an RSA key pair because the JVM does not currently provide adequate key wrapping support for elliptic curve key pairs.  If you have also configured the server to use a PKCS #11 token for accessing listener certificates, we strongly recommend that you use a different certificate to protect the contents of the encryption settings database than you use for negotiating TLS sessions with clients. It is imperative that the certificate used by this PKCS11 Cipher Stream Provider remain constant for the life of the provider because if the certificate were to be replaced, then the contents of the encryption settings database could become inaccessible. Unlike with listener certificates used for TLS negotiation that need to be replaced on a regular basis, this PKCS11 Cipher Stream Provider does not consider the validity period for the associated certificate, and it will continue to function even after the certificate has expired.  If you need to rotate the certificate used to protect the server's encryption settings database, you should first install the desired new certificate in the PKCS #11 token under a different alias. Then, you should create a new instance of this PKCS11 Cipher Stream Provider that is configured to use that certificate, and that also uses a different value for the encryption-metadata-file because the information in that file is tied to the certificate used to generate it. Finally, you will need to update the global configuration so that the encryption-settings-cipher-stream-provider property references the new cipher stream provider rather than this one. The update to the global configuration must be done with the server online so that it can properly re-encrypt the contents of the encryption settings database with the correct key tied to the new certificate.

### Optional

- `description` (String) A description for this Cipher Stream Provider
- `encryption_metadata_file` (String) The path to a file that will hold metadata about the encryption performed by this PKCS11 Cipher Stream Provider.
- `key_store_pin` (String, Sensitive) The clear-text user PIN needed to interact with the PKCS #11 token.
- `key_store_pin_environment_variable` (String) The name of an environment variable whose value is the user PIN needed to interact with the PKCS #11 token. The environment variable must be defined and must contain a clear-text representation of the PIN.
- `key_store_pin_file` (String) The path to a file containing the user PIN needed to interact with the PKCS #11 token. The file must exist and must contain exactly one line with a clear-text representation of the PIN.
- `pkcs11_key_store_type` (String) The key store type to use when obtaining an instance of a key store for interacting with a PKCS #11 token.
- `pkcs11_provider_class` (String) The fully-qualified name of the Java security provider class that implements support for interacting with PKCS #11 tokens.
- `pkcs11_provider_configuration_file` (String) The path to the file to use to configure the security provider that implements support for interacting with PKCS #11 tokens.

### Read-Only

- `last_updated` (String) Timestamp of the last Terraform update of this resource.
- `notifications` (Set of String) Notifications returned by the PingDirectory Configuration API.
- `required_actions` (Set of Object) Required actions returned by the PingDirectory Configuration API. (see [below for nested schema](#nestedatt--required_actions))

<a id="nestedatt--required_actions"></a>
### Nested Schema for `required_actions`

Read-Only:

- `property` (String)
- `synopsis` (String)
- `type` (String)

## Import

Import is supported using the following syntax:

```shell
# "pkcs11CipherStreamProviderId" should be the id of the Pkcs11 Cipher Stream Provider to be imported
terraform import pingdirectory_pkcs11_cipher_stream_provider.myPkcs11CipherStreamProvider pkcs11CipherStreamProviderId
```

